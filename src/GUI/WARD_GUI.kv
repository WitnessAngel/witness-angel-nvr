#:import KivyConsole waclient.utilities.widgets.KivyConsole


NavigationLayout:

    WindowManager:
        id: screen_manager

        MainWindow:

            BoxLayout:
                orientation: 'vertical'

                MDToolbar:
                    md_bg_color: (0.1372, 0.2862, 0.5294, 1)
                    title: "Witness Angel"
                    elevation: 10
                    left_action_items: [['menu', lambda x: nav_drawer.toggle_nav_drawer()]]

                    ActionButton:
                        text: 'Settings'

                        on_release:
                            app.open_settings()

                Widget:

        SecondWindow:

            BoxLayout:
                orientation: 'vertical'

                MDToolbar:
                    md_bg_color: (0.1372, 0.2862, 0.5294, 1)
                    title: "Witness Angel"
                    elevation: 10
                    left_action_items: [['menu', lambda x: nav_drawer.toggle_nav_drawer()]]

                    ActionButton:
                        text: 'Home'

                        on_release:
                            screen_manager.current = "MainMenu"
                            screen_manager.transition.direction = "right"

                Widget:

        ThirdWindow:

            BoxLayout:
                orientation: 'vertical'

                MDToolbar:
                    md_bg_color: (0.1372, 0.2862, 0.5294, 1)
                    title: "Witness Angel"
                    elevation: 10
                    left_action_items: [['menu', lambda x: nav_drawer.toggle_nav_drawer()]]

                    ActionButton:
                        text: 'Home'

                        on_release:
                            screen_manager.current = "MainMenu"
                            screen_manager.transition.direction = "right"


                Widget:

    MDNavigationDrawer:
        id: nav_drawer
        ContentNavigationDrawer:
            id: content_drawer

<Content>:
    orientation: "vertical"
    spacing: "12dp"
    size_hint_y: None
    height: "120dp"
    id: passphrase_textfield

    MDTextField:
        hint_text: "Passphrase"
        id: pass_text


<ConsoleOutput>:
    readonly: True
    padding: 6, 6
    size_hint: (1, None)

<KivyConsole>:
    console_output: console_output
    scroll_view: scroll_view
    ScrollView:
        id: scroll_view
        bar_width: 10
        ConsoleOutput:
            id: console_output
            height: max(self.parent.height, self.minimum_height)
            font_name: root.font_name
            font_size: root.font_size
            foreground_color: 1, 1, 1, 1

            background_color: 0.1372, 0.2862, 0.5294, 1



<ItemDrawer>:
    theme_text_color: "Custom"
    on_release:
        self.parent.set_color_item(self)


    IconLeftWidget:
        id: icon
        icon: root.icon
        theme_text_color: "Custom"
        text_color: root.text_color

<ContentNavigationDrawer>:
    orientation: "vertical"
    padding: "8dp"
    spacing: "8dp"

    AnchorLayout:
        size_hint_y: None
        height: avatar.height
        anchor_x: 'center'
        anchor_y: 'center'

        Image:
            id: avatar
            size_hint: None, None
            size: "150dp", "150dp"
            source: "logoWA.PNG"

    MDLabel:
        text: "WitnessAngel"
        font_style: "Button"
        size_hint_y: None
        height: self.texture_size[1]

    MDLabel:
        text: "WitnessWard"
        font_style: "Caption"
        size_hint_y: None
        height: self.texture_size[1]

    ScrollView:

        DrawerList:
            id: md_list

<MainWindow>:
    name: "MainMenu"
    orientation: "vertical"
    canvas.before:
        Color:
            rgba: 0.1372, 0.2862, 0.5294, 1
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        rows:6

        GridLayout:
            size_hint: 1, 0.35
            spacing:  [90,120]
            padding: [20,20]
            cols:2
            BoxLayout:
                Label:
                    size_hint: 0.4, 0.3
                    text: 'Recording'
                Switch:
                    size: 150, 50
                    size_hint: 0.4, 0.3
                    id: switch
                    active: False
                    on_active:
                        app.switch_callback(self, self.active)


        GridLayout:
            size_hint: 1, 1
            rows:3
            padding:20,10,20,10

            Label:
                size_hint: 0.4, 0.05
                text: 'Low resolution overview :'

            BoxLayout:
                size_hint: 1, 1
                id: player



        GridLayout:
            size_hint: 1, 0.30
            cols:1
            padding:20,10,20,10

            KivyConsole:
                id: kivy_console
                canvas.after:
                    Color:
                        rgba: 0.1372, 0.2862, 0.5294, 1
<SecondWindow>:


    name: "Keys_management"

    canvas.before:
        Color:
            rgba: 0.1372, 0.2862, 0.5294, 1
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        rows:6

        GridLayout:
            size_hint: 1, 0.25
            cols:2


        GridLayout:
            size_hint: 1, 1
            rows:2
            padding:0,10,20,0
            spacing:20,20
            AnchorLayout:
                size_hint: 1, 0.3
                anchor_x: 'left'
                anchor_y: 'top'
                padding: [0, 0, 20, 0]
                Label:
                    size_hint: 0.4, 0.10
                    text: 'Key management :'
                    halign: "left"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_size: 24
                    size_hint: None, None
                    size: 350, 100

            BoxLayout:
                size_hint: 1, 1
                BoxLayout:
                    orientation: 'vertical'
                    id: table
                    size_hint: 0.8, 1

        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'bottom'
            padding: [20, 60, 20, 20]
            Button:
                id: btn
                background_color: (51, 23, 186.0, 1)
                color: 0.1372, 0.2862, 0.5294, 1
                text: "Import new keys"
                size: 250, 50
                size_hint: None, None
                on_release:
                    app.import_keys()



<ThirdWindow>:
    name: "Container_management"

    canvas.before:
        Color:
            rgba: 0.1372, 0.2862, 0.5294, 1
        Rectangle:
            pos: self.pos
            size: self.size

    GridLayout:
        rows:6

        GridLayout:
            size_hint: 1, 0.25
            cols:2


        GridLayout:
            size_hint: 1, 1
            rows:2
            padding:20,10,20,0
            AnchorLayout:
                size_hint: 1, 0.3
                anchor_x: 'left'
                anchor_y: 'top'
                padding: [0, 0, 20, 0]
                Label:
                    size_hint: 0.4, 0.10
                    text: 'Container management :'
                    halign: "right"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    font_size: 24
                    size_hint: None, None
                    size: 350, 100

            BoxLayout:
                size_hint: 1, 1
                BoxLayout:
                    orientation: 'vertical'
                    id: table
                    size_hint: 0.8, 1

        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'bottom'
            padding: [80, 60, 20, 0]
            GridLayout:
                size_hint: 0.8, 0.5
                cols:2
                Button:
                    id: delete
                    background_color: (51, 23, 186.0, 1)
                    color: 0.1372, 0.2862, 0.5294, 1
                    text: "Delete"
                    size: 250, 50
                    size_hint: None, None
                    disabled: False
                    on_release:
                        app.open_dialog_delete_container()

                Button:
                    id: decipher
                    background_color: (51, 23, 186.0, 1)
                    color: 0.1372, 0.2862, 0.5294, 1
                    text: "Decrypt"
                    size: 250, 50
                    size_hint: None, None
                    disabled: False
                    on_release:
                        app.open_dialog_decipher_container()











